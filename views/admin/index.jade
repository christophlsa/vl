html
	head
		script(src='/javascript/jquery-1.7.2.min.js')
		script(src='/bootstrap/js/bootstrap.min.js')
		link(rel='stylesheet',href='/bootstrap/css/bootstrap.min.css')
		link(rel='stylesheet',href='/bootstrap/css/bootstrap-responsive.min.css')
		link(rel='stylesheet',href='/stylesheets/admin.css')
		script(src='/socket.io/socket.io.js')
		script(src='/javascript/timerClient.js')
		script(src='/javascript/apiClient/beamer.js')
		script(src='/javascript/apiClient/agenda.js')
		script(src='/javascript/apiClient/timers.js')
		script(src='/javascript/apiClient/socket.js')
		script(src='/javascript/admin/navigation.js')
		script(src='/javascript/admin/beamer.js')
		script(src='/javascript/admin/beamer-flash.js')
		script(src='/javascript/admin/agenda.js')
		script(src='/javascript/admin/timers.js')
	body(style="padding-top:90px;")
		div.navbar.navbar-fixed-top
			div.navbar-inner
				div.container
					a.brand Versammlungsleiter
					ul.nav
						li.beamers
							a#nav-beamers(href="#beamers") Beamereinstellungen
						li.agenda
							a#nav-agenda(href="#agenda") Tagesordnung
						li.timers
							a#nav-timers(href="#timers") Timer
					a#new-flash.pull-right.btn.btn-danger.btn Info
					a#identify-beamers.pull-right.btn.btn-info Identifizieren

		div#flash-options.modal
			div.modal-header
				button.close(data-dismiss="modal") ×
				h3 Bekanntmachung erstellen
			form.form-horizontal.modal-body
				textarea#text
				label
					input(type="text",value="30")#timeout.span1
					| Sekunden
				label
					select#type
						option(value="danger") Error or danger
						option(value="information") Information
						option(value="success") Success
				div#select-beamers
			div.modal-footer
				button.btn.btn-primary#save-flash Anzeigen
				button.btn(data-dismiss="modal") Abbrechen

		div#beamers.container
			div#beameroptions.btn-group
				button#new-beamer.btn.btn-success Neu

			table#beamers.table-striped.table-bordered.table-condensed
				tr
					th
					th Beamer
					th Optionen

		div#agenda.container
			div#slideoptions.btn-group
				button#new-slide.btn.btn-success Neu

			table#slides.table-striped.table-bordered.table-condensed
				tr
					th
					th Tagesordnungspunkt
					th(colspan=2) Optionen

			div#options.modal
				div.modal-header
					button.close(data-dismiss="modal") ×
					h3 Tagesordnungspunkt bearbeiten
				form.form-horizontal.modal-body
					input(type="text")#title
				div.modal-footer
					button.btn.btn-primary#save-slide Speichern
					button.btn(data-dismiss="modal") Schließen
					button.btn.btn-danger#delete-slide Löschen

		div#timers.container
			div#timeroptions.btn-group
				button#new-timer.btn.btn-success Neu

			table#timers.table-striped.table-bordered.table-condensed
				tr
					th 
					th Timer
					th Restzeit
					th(colspan=2) Optionen

			div#timer-options.modal
				div.modal-header
					button.close(data-dismatch="modal") ×
					h3 Timer anlegen
				form.form-horizontal.modal-body
					input(type="text")#title
					input(type="text")#color.span2
					input(type="text")#value.span1
				div.modal-footer
					button.btn.btn-primary#save-timer Speichern
					button.btn(data-dismiss="modal") Schließen
					button.btn.btn-danger#delete-timer Löschen

		script(type="text/javascript")
			$(".modal").hide();

		script(type="text/javascript")
			var beamers = {};
			var slides = {};
			var slideLatestChild = {};
			var timers = {};
			var timerCurrent = {};
			var timerTimeout = {};
			var timerLastRun = {};

			var socket = new socket();
			socket.connect(function () {
				socket.registerBeamers(beamerClient);
				socket.registerAgenda(agendaClient);
				socket.registerTimers(timerClient);
			});
